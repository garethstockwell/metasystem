# modules/screen.sh

#------------------------------------------------------------------------------
# Dependency check
#------------------------------------------------------------------------------

command_exists screen || return 1


#------------------------------------------------------------------------------
# Variables
#------------------------------------------------------------------------------

_metasystem_screen_title=


#------------------------------------------------------------------------------
# Functions
#------------------------------------------------------------------------------

function screen_set_title()
{
	_metasystem_screen_title="$@"
    echo -en '\033k'$_metasystem_screen_title'\033\\'
}


#------------------------------------------------------------------------------
# Hooks
#------------------------------------------------------------------------------

function _metasystem_hook_screen_cd_post()
{
	local title=$METASYSTEM_DIRINFO_LABEL
	[[ -z $title ]] && title=shell
	if [[ $title != $_metasystem_screen_title ]]; then
		screen_set_title $title
	fi
}


#------------------------------------------------------------------------------
# Main
#------------------------------------------------------------------------------

