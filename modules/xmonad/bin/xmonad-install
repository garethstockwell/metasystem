#!/bin/bash

# xmonad installation script
#
# Based on content from
#     https://github.com/davidbrewer/xmonad-ubuntu-conf/blob/master/start-xmonad

XMONAD_DIR=$( builtin cd $(dirname ${BASH_SOURCE:-$0})/.. && pwd )

PACKAGES='
conky
dmenu
dzen2
ttf-inconsolata
trayer
xcompmgr
xmonad
xscreensaver
'

echo "Installing packages"

# Add repo which contains xft-enabled versions of dmenu, dzen2
# See https://launchpad.net/~chilicuil/+archive/sucklesstools
sudo apt-add-repository ppa:chilicuil/sucklesstools

sudo apt-get install ${PACKAGES}

echo "Creating xsession configuration"
desktop_file=/usr/share/xsessions/xmonad.desktop
if [[ -e ${desktop_file} ]]; then
	if [[ -e ${desktop_file}.orig ]]; then
		echo "Error: ${desktop_file}.orig" already exists
		exit 1
	fi
	sudo mv ${desktop_file} ${desktop_file}.orig
fi
sudo cp -v ${XMONAD_DIR}/config/xmonad.desktop ${desktop_file}

