#!/bin/bash

# xmonad setup script
#
# Based on content from
#     https://github.com/davidbrewer/xmonad-ubuntu-conf/blob/master/start-xmonad

XMONAD_DIR=$( builtin cd $(dirname ${BASH_SOURCE:-$0})/.. && pwd )

#------------------------------------------------------------------------------
# Set up X
#------------------------------------------------------------------------------

xrdb -merge ~/.Xresources

# TODO: screen configuration

# Background
# Use S_base03 from solarized
#xsetroot -solid "#002b36"
hsetroot -solid "#002b36"

#------------------------------------------------------------------------------
# Launch programs
#------------------------------------------------------------------------------

function launch()
{
	local prog=$1
	shift
	if hash $prog 2>/dev/null; then
		$prog $@ &
	fi
}

# Network monitor
launch nm-applet --sm-disable

# Screensaver
launch xscreensaver -no-splash

# Xcompmgr
launch xcompmgr

# Run the gnome-keyring-daemon to avoid issues you otherwise may encounter
# when using gnome applications which expect access to the keyring, such
# as Empathy. This prevents prompts you may otherwise get for invalid
# certificates and the like.
launch gnome-keyring-daemon --start --components=gpg,pkcs11,secrets,ssh

# Apps
launch rxvt -e tmux attach -t default
launch firefox
launch pidgin
launch skype
launch remmina
launch thunderbird

# Desktop monitor (mirrored across two screens)
launch conky -c ~/.conky/desktop -a bottom_left -x 20 -y 20
launch conky -c ~/.conky/desktop -a bottom_right -x 20 -y 20

